[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Timesheet", 
  "modified": "2016-09-09 19:58:12.931366", 
  "name": "Timesheet-Client", 
  "script": "frappe.ui.form.on(\"Timesheet\",\"refresh\",function(frm) {\n\tif(cur_frm.doc.signature_json){\n\t\tvar sign = \"\"\n\t\tsign = JSON.parse(\"[\" + cur_frm.doc.signature_json + \"]\")\n\t\tconsole.log(sign[0])\n                $('[data-fieldname=\"signature\"]').show() \n\t\t$('[data-fieldname=\"signature\"]').signature()\n                $('[data-fieldname=\"signature\"]').signature({disabled: true});  \n\t\t$('[data-fieldname=\"signature\"]').signature(\"draw\", sign[0])\n                $('[data-fieldname=\"signature_svg\"]').css(\"width\", \"5cm\")\n        }\n        else {\n          $('[data-fieldname=\"signature\"]').hide()\n        }  \n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Customer", 
  "modified": "2016-10-10 19:09:19.929947", 
  "name": "Customer-Client", 
  "script": "frappe.ui.form.on(\"Customer\", \"refresh\", function(frm) {\n\tif(!cur_frm.doc.__islocal) {\n\t\tcur_frm.add_custom_button(__('Make Log'), \n\t\tfunction() {\n\t\t\tconsole.log(\"hihihi\")\n\t\t\tclick_on_log()                      \n\t\t}, \"icon-exclamation\", \"btn-default make_log\");\n                cur_frm.add_custom_button(__('Show Logs'), \n\t\tfunction() {\n\t\t\tconsole.log(\"hihihi\")\n\t\t\tshow_logs()                      \n\t\t}, \"icon-exclamation\", \"btn-default show_log\");\t\n\t}\n})\n\nshow_logs = function(){\n\tif(frappe.route_options){\n\t\tconsole.log(\"in if cond\")\n\t\tfrappe.route_options[\"client_info\"] = cur_frm.doc.doctype+\"-\"+cur_frm.doc.name\n\t}\n\telse{\n\t\tconsole.log(\"in else cond\")\n\t\tfrappe.route_options = {\n\t\t\t\"client_info\":cur_frm.doc.doctype+\"-\"+cur_frm.doc.name\n\t\t}\n\t}\n\t\t\tfrappe.set_route(\"query-report\", \"Call Logs Report\");\n}\n\n\nclick_on_log = function(name){\n        if (frappe.route_options){\n\t\tconsole.log(\"in frappe.route_options\",frappe.route_options)\n                var contact_person = frappe.route_options[\"contact_person\"]\n                var phone_number = frappe.route_options[\"mobile_no\"]\n                var call_receive_time = frappe.route_options[\"call_receive_time\"]\n\t\tvar contact_type = frappe.route_options[\"contact_type\"]\n                frappe.route_options = null;\n\t\ttn = frappe.model.make_new_doc_and_get_name('Call Logs');\n\t\tlocals['Call Logs'][tn].contact_person = contact_person\n\t\tlocals['Call Logs'][tn].phone_number = phone_number\n                locals['Call Logs'][tn].client = cur_frm.doc.name \n\t\tlocals['Call Logs'][tn].start_time = call_receive_time\n\t\tlocals['Call Logs'][tn].call_attendant = user\n                locals['Call Logs'][tn].contact_type = contact_type\n\t\tfrappe.set_route('Form', 'Call Logs', tn);\n        }\n        else{ \n\t\tfrappe.model.open_mapped_doc({\n        \t\tmethod: \"switsol.switsol.make_user.get_call_logs_from_customer\",\n        \t\tfrm: cur_frm\n    \t\t})\n\t}     \n}", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Contact", 
  "modified": "2016-10-10 18:37:29.469586", 
  "name": "Contact-Client", 
  "script": "frappe.ui.form.on('Contact', 'refresh', function(frm) {\n\tif(!cur_frm.doc.__islocal && frappe.route_options){\n\tif(frappe.route_options[\"doctype\"] && frappe.route_options[\"doc_name\"] && frappe.route_options[\"new_contact\"] == \"Yes\"){\n                frappe.route_options[\"contact_person\"] = cur_frm.doc.name\n\t\tfrappe.route_options[\"mobile_no\"] = cur_frm.doc.mobile_no\n\t       \n\t\tfrappe.set_route('Form', frappe.route_options[\"doctype\"], frappe.route_options[\"doc_name\"]); \n           //frappe.route_options = null;    \n\t}\n        if(frappe.route_options[\"mobile_no\"]){\n       \t\tcur_frm.set_value(\"mobile_no\",frappe.route_options[\"mobile_no\"]) \n        }\n     }\n})\n\nfrappe.ui.form.on('Contact', 'validate', function(frm) {\n\tif(!cur_frm.doc.__islocal){\n\t\tfrappe.route_options[\"new_contact\"] = \"Yes\"\n\t}\n})\n\nfrappe.ui.form.on(\"Contact\", \"refresh\", function(frm) {\n\tif(!cur_frm.doc.__islocal){\n\t\tcur_frm.add_custom_button(__('Show Logs'), \n\t\tfunction() {\n\t\t\tconsole.log(\"hihihi\")\n\t\t\tshow_logs();                      \n\t\t}, \"icon-exclamation\", \"btn-default show_logs\");\t\t\n\t}\n})\n\nshow_logs = function(){\n       if(frappe.route_options){\n\t\tconsole.log(\"in if cond\")\n\t\tfrappe.route_options[\"client_info\"] = cur_frm.doc.doctype+\"-\"+cur_frm.doc.name+\"-\"+cur_frm.doc.mobile_no\n\t}\n\telse{\n\t\tconsole.log(\"in else cond\")\n\t\tfrappe.route_options = {\n\t\t\t\"client_info\":cur_frm.doc.doctype+\"-\"+cur_frm.doc.name+\"-\"+cur_frm.doc.mobile_no\n\t\t}\n\t} \n\tfrappe.set_route(\"query-report\", \"Call Logs Report\");\n}", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Supplier", 
  "modified": "2016-10-11 11:44:53.712649", 
  "name": "Supplier-Client", 
  "script": "frappe.ui.form.on(\"Supplier\", \"refresh\", function(frm) {\n\tif(!cur_frm.doc.__islocal) {\n\t\tcur_frm.add_custom_button(__('Make Log'), \n\t\tfunction() {\n\t\t\tconsole.log(\"hihihi\")\n\t\t\tclick_on_log()                      \n\t\t}, \"icon-exclamation\", \"btn-default make_log\");\n\t\tcur_frm.add_custom_button(__('Show Logs'), \n\t\tfunction() {\n\t\t\tconsole.log(\"hihihi\")\n\t\t\tshow_logs()                      \n\t\t}, \"icon-exclamation\", \"btn-default show_logs\");\n\t}\n})\n\nshow_logs = function(){\n\tif(frappe.route_options){\n\t\tconsole.log(\"in if cond\")\n\t\tfrappe.route_options[\"client_info\"] = cur_frm.doc.doctype+\"-\"+cur_frm.doc.name\n\t}\n\telse{\n\t\tconsole.log(\"in else cond\")\n\t\tfrappe.route_options = {\n\t\t\t\"client_info\":cur_frm.doc.doctype+\"-\"+cur_frm.doc.name\n\t\t}\n\t} \n\tfrappe.set_route(\"query-report\", \"Call Logs Report\");\n}\n\n\n\nclick_on_log = function(name){\n            if (frappe.route_options){\n\t\tconsole.log(\"in frappe.route_options\",frappe.route_options)\n                var contact_person = frappe.route_options[\"contact_person\"]\n                var phone_number = frappe.route_options[\"mobile_no\"]\n\t\tvar call_receive_time = frappe.route_options[\"call_receive_time\"]\n\t\tvar contact_type = frappe.route_options[\"contact_type\"]\n                frappe.route_options = null;\n\t\ttn = frappe.model.make_new_doc_and_get_name('Call Logs');\n\t\tlocals['Call Logs'][tn].contact_person = contact_person\n\t\tlocals['Call Logs'][tn].phone_number = phone_number\n                locals['Call Logs'][tn].client = cur_frm.doc.name\n\t\tlocals['Call Logs'][tn].start_time = call_receive_time\n                locals['Call Logs'][tn].call_attendant = user\n\t\tlocals['Call Logs'][tn].contact_type = contact_type\n\t\tfrappe.set_route('Form', 'Call Logs', tn);\n        }\n        else{\n\t    frappe.model.open_mapped_doc({\n        method: \"switsol.switsol.make_user.get_call_logs_from_supplier\",\n        frm: cur_frm\n    })\n\t}\n}", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Partner", 
  "modified": "2016-10-10 19:06:35.076275", 
  "name": "Sales Partner-Client", 
  "script": "frappe.ui.form.on(\"Sales Partner\", \"refresh\", function(frm) {\n\tif(!cur_frm.doc.__islocal) {\n\t\tcur_frm.add_custom_button(__('Make Log'), \n\t\tfunction() {\n\t\t\tconsole.log(\"hihihi\")\n\t\t\tclick_on_log()                      \n\t\t}, \"icon-exclamation\", \"btn-default make_log\");\n\t\tcur_frm.add_custom_button(__('Show Logs'), \n\t\tfunction() {\n\t\t\tconsole.log(\"hihihi\")\n\t\t\tshow_logs()                      \n\t\t}, \"icon-exclamation\", \"btn-default show_logs\");\t\n\t}\n})\n\n\nshow_logs = function(){\n\tif(frappe.route_options){\n\t\tconsole.log(\"in if cond\")\n\t\tfrappe.route_options[\"client_info\"] = cur_frm.doc.doctype+\"-\"+cur_frm.doc.name\n\t}\n\telse{\n\t\tconsole.log(\"in else cond\")\n\t\tfrappe.route_options = {\n\t\t\t\"client_info\":cur_frm.doc.doctype+\"-\"+cur_frm.doc.name\n\t\t}\n\t} \n\t\t\tfrappe.set_route(\"query-report\", \"Call Logs Report\");\n}\n\nclick_on_log = function(name){\n\n\tif (frappe.route_options){\n\t\tconsole.log(\"in frappe.route_options\",frappe.route_options)\n                var contact_person = frappe.route_options[\"contact_person\"]\n                var phone_number = frappe.route_options[\"mobile_no\"]\n                var call_receive_time = frappe.route_options[\"call_receive_time\"] \n\t\tvar contact_type = frappe.route_options[\"contact_type\"]\n\t\tfrappe.route_options = null;\n\t\ttn = frappe.model.make_new_doc_and_get_name('Call Logs');\n\t\tlocals['Call Logs'][tn].contact_person = contact_person\n\t\tlocals['Call Logs'][tn].phone_number = phone_number\n                locals['Call Logs'][tn].client = cur_frm.doc.name\n\t\tlocals['Call Logs'][tn].start_time = call_receive_time\n\t\tlocals['Call Logs'][tn].call_attendant = user\n\t\tlocals['Call Logs'][tn].contact_type = contact_type\n\t\tfrappe.set_route('Form', 'Call Logs', tn);\n        }\n\n         else{\n\t    frappe.model.open_mapped_doc({\n        method: \"switsol.switsol.make_user.get_call_logs_from_sales_partner\",\n        frm: cur_frm\n    })\n    }\n}", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Call Logs", 
  "modified": "2016-10-10 18:39:20.037224", 
  "name": "Call Logs-Client", 
  "script": "frappe.ui.form.on(\"Call Logs\", \"validate\", function(frm) {\n\tif(cur_frm.doc.__islocal){\n\t\tcur_frm.set_value(\"end_time\",frappe.datetime.now_datetime())\n\t}\n})\nfrappe.ui.form.on(\"Call Logs\", \"refresh\", function(frm) {\n\tif(cur_frm.doc.client){\n\t\tcur_frm.add_custom_button(__('Show Logs'), \n\t\tfunction() {\n\t\t\tconsole.log(\"hihihi\")\n\t\t\tshow_logs()                      \n\t\t}, \"icon-exclamation\", \"btn-default show_logs\");\t\t\n\t}\n})\n\nshow_logs = function(){\n\tif(frappe.route_options){\n\t\tconsole.log(\"in if cond\")\n\t\tfrappe.route_options[\"client_info\"] = cur_frm.doc.doctype+\"-\"+cur_frm.doc.name+\"-\"+cur_frm.doc.contact_person+\"-\"+cur_frm.doc.phone_number\n\t}\n\telse{\n\t\tconsole.log(\"in else cond\")\n\t\tfrappe.route_options = {\n\t\t\t\"client_info\":cur_frm.doc.doctype+\"-\"+cur_frm.doc.name+\"-\"+cur_frm.doc.contact_person+\"-\"+cur_frm.doc.phone_number\n\t\t}\n\t} \n\t\t\tfrappe.set_route(\"query-report\", \"Call Logs Report\");\n}", 
  "script_type": "Client"
 }
]